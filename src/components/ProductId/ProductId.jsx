import React, { useEffect, useState } from "react";
import "./ProductId.scss";
import { Link, useParams } from "react-router-dom";
import axios from "axios";
import { PopUpCategories } from "../Content/PopUpCategories";
import { useDispatch } from "react-redux";
import { addToBasket } from "../../redux/slice/basketSlice";

export const ProductId = () => {
  const { id } = useParams();
  const [product, setProduct] = useState();
  const {_id, name, photosURL, description, price, colors, sizes } = product || {}
  const dispatch = useDispatch()
  
  useEffect(() => {
    const getData = async () => {
      const response = await axios.get(
        "http://cepbep.ddns.net:2500/api/shopDB/products/getProductById/" + id
      );

      setProduct(response.data[0]);
    };
    getData();
  }, []);
  

console.log(_id, name, photosURL, description, price, colors, sizes);
  return (
    <>
      {product ? (
        <div className="product-card">
          <div className="nav">
            <Link className="main" to={"/"}>
              <p className="main">Главная/ </p>
            </Link>
            <p className="category">{product.category}</p>
          </div>

        <div className="page">          
        <PopUpCategories/>
        <p className="name">
            {product.name} <span className="article"> Арт.{product._id}</span>
          </p>
          <div className="block-content">
            <div className="content-image">
              <img className="image" src={product.photosURL} alt="" />
            </div>
            <div className="content-info">
              <p className="price">{product.price} KZT</p>
              <div className="color-box">
                <p className="color">Цвета</p>
                <div className="color-img-box">
                  <img
                    className="color-img"
                    src="/src/assets/Image/Group 55.svg"
                    alt=""
                  />
                </div>
              </div>
              <div className="size-box">
                <p className="size">Размер</p>
                <div className="sizes">
                  {product &&
                    product.sizes.map((size, ind) => (
                      <p className="item" key={ind}>
                        {size}
                      </p>
                    ))}
                </div>
              </div>
              <p className="table">Таблица размеров</p>
              <div className="line"></div>
              <div className="action">
               { product && <div className="add-to-basket" onClick={()=> dispatch(addToBasket({_id,  name, photosURL, colors, price, sizes }))} >
                  <span className="basket">В корзину</span>
                  <svg
                    className="basket-svg"
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                  >
                    <path
                      d="M13.8893 6.66669V5.0278C13.8893 4.51711 13.7887 4.01141 13.5933 3.53959C13.3979 3.06777 13.1114 2.63906 12.7503 2.27795C12.3892 1.91683 11.9605 1.63037 11.4886 1.43494C11.0168 1.2395 10.5111 1.13892 10.0004 1.13892C9.48974 1.13892 8.98404 1.2395 8.51222 1.43494C8.0404 1.63037 7.61169 1.91683 7.25057 2.27795C6.88946 2.63906 6.603 3.06777 6.40757 3.53959C6.21213 4.01141 6.11154 4.51711 6.11154 5.0278V8.91669C6.11154 9.06404 6.17008 9.20534 6.27426 9.30953C6.37845 9.41372 6.51976 9.47225 6.6671 9.47225C6.81444 9.47225 6.95575 9.41372 7.05994 9.30953C7.16412 9.20534 7.22266 9.06404 7.22266 8.91669V7.7778H11.6671V6.66669H7.22266V5.0278C7.22266 4.29109 7.51531 3.58455 8.03625 3.06362C8.55718 2.54269 9.26372 2.25003 10.0004 2.25003C10.7371 2.25003 11.4437 2.54269 11.9646 3.06362C12.4856 3.58455 12.7782 4.29109 12.7782 5.0278V8.88892C12.7782 9.03626 12.8367 9.17757 12.9409 9.28175C13.0451 9.38594 13.1864 9.44447 13.3338 9.44447C13.4811 9.44447 13.6224 9.38594 13.7266 9.28175C13.8308 9.17757 13.8893 9.03626 13.8893 8.88892V7.7778H16.6671V17.7778H3.33377V7.7778H5.00043V6.66669H2.22266V17.8278C2.22266 18.1092 2.33445 18.3791 2.53345 18.5781C2.73245 18.7771 3.00234 18.8889 3.28377 18.8889H16.7171C16.9985 18.8889 17.2684 18.7771 17.4674 18.5781C17.6664 18.3791 17.7782 18.1092 17.7782 17.8278V6.66669H13.8893Z"
                      fill="#FFFDF5"
                    />
                  </svg>
                </div> }
                <div className="add-to-favorite">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="38"
                    height="37"
                    viewBox="0 0 38 37"
                    fill="none"
                  >
                    <path
                      d="M18.7797 33.3308C18.5526 33.3301 18.3321 33.2542 18.1527 33.115C12.4383 28.675 8.50191 24.8517 5.74747 21.0797C2.23247 16.2594 1.4308 11.8092 3.36302 7.85222C4.74025 5.02583 8.69719 2.71333 13.3222 4.05972C15.5273 4.69667 17.4513 6.06263 18.7797 7.93444C20.1081 6.06263 22.0321 4.69667 24.2372 4.05972C28.8519 2.73388 32.8191 5.02583 34.1964 7.85222C36.1286 11.8092 35.3269 16.2594 31.8119 21.0797C29.0575 24.8517 25.1211 28.675 19.4066 33.115C19.2272 33.2542 19.0068 33.3301 18.7797 33.3308ZM10.6911 5.73499C9.59059 5.69216 8.49921 5.94985 7.5341 6.48039C6.56899 7.01093 5.76659 7.79429 5.21302 8.74638C3.61997 12.0147 4.33941 15.653 7.41247 19.8567C10.6783 24.0691 14.5025 27.8172 18.7797 30.9978C23.0562 27.8204 26.8804 24.0757 30.1469 19.8669C33.2303 15.653 33.9394 12.0147 32.3464 8.75666C31.3186 6.70111 28.2353 5.06694 24.8025 6.03305C23.7018 6.35834 22.6814 6.91048 21.8069 7.65393C20.9325 8.39738 20.2234 9.31568 19.7252 10.3497C19.6478 10.5382 19.5161 10.6995 19.3468 10.8129C19.1775 10.9264 18.9783 10.987 18.7746 10.987C18.5708 10.987 18.3716 10.9264 18.2023 10.8129C18.033 10.6995 17.9013 10.5382 17.8239 10.3497C17.3295 9.31309 16.6216 8.39265 15.7466 7.64874C14.8716 6.90482 13.8493 6.35423 12.7466 6.03305C12.0786 5.83901 11.3868 5.7387 10.6911 5.73499Z"
                      fill="#514A7E"
                    />
                  </svg>
                </div>
              </div>
              <div className="stars">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="23"
                  height="23"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <path
                    d="M18.8895 9.32224C19.0959 9.16842 19.2491 8.95383 19.3275 8.70858C19.4058 8.46332 19.4055 8.19968 19.3264 7.95463C19.2474 7.70958 19.0937 7.49541 18.8868 7.34215C18.6799 7.18889 18.4302 7.10422 18.1728 7.10001L13.1728 6.91112C13.1482 6.90943 13.1246 6.90066 13.1049 6.88587C13.0852 6.87109 13.0702 6.85092 13.0617 6.82779L11.3339 2.16113C11.2471 1.9237 11.0894 1.71869 10.8822 1.57384C10.675 1.429 10.4284 1.35132 10.1756 1.35132C9.92277 1.35132 9.67608 1.429 9.46889 1.57384C9.26171 1.71869 9.10404 1.9237 9.01723 2.16113L7.29501 6.84446C7.28649 6.86758 7.27148 6.88775 7.25176 6.90254C7.23205 6.91733 7.20848 6.9261 7.1839 6.92779L2.1839 7.11668C1.92645 7.12089 1.67678 7.20555 1.46989 7.35882C1.263 7.51208 1.10926 7.72625 1.03023 7.9713C0.951207 8.21635 0.950852 8.47998 1.02922 8.72524C1.10759 8.9705 1.26075 9.18508 1.46723 9.3389L5.38945 12.4222C5.40908 12.4377 5.42375 12.4585 5.43165 12.4822C5.43955 12.5059 5.44033 12.5314 5.4339 12.5556L4.0839 17.3389C4.01394 17.5825 4.02072 17.8417 4.10331 18.0813C4.1859 18.3209 4.34029 18.5292 4.54548 18.6779C4.75067 18.8267 4.9967 18.9086 5.25009 18.9125C5.50349 18.9165 5.75195 18.8423 5.96167 18.7L10.1061 15.9222C10.1265 15.9081 10.1508 15.9006 10.1756 15.9006C10.2004 15.9006 10.2246 15.9081 10.245 15.9222L14.3895 18.7C14.5963 18.8471 14.8439 18.9262 15.0978 18.9262C15.3517 18.9262 15.5992 18.8471 15.8061 18.7C16.0114 18.5527 16.1659 18.3454 16.2485 18.1066C16.3311 17.8678 16.3376 17.6093 16.2672 17.3667L14.9061 12.5667C14.8989 12.5426 14.8993 12.5168 14.9073 12.493C14.9152 12.4691 14.9303 12.4483 14.9506 12.4333L18.8895 9.32224Z"
                    fill="#514A7E"
                  />
                </svg>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="23"
                  height="23"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <path
                    d="M18.8895 9.32224C19.0959 9.16842 19.2491 8.95383 19.3275 8.70858C19.4058 8.46332 19.4055 8.19968 19.3264 7.95463C19.2474 7.70958 19.0937 7.49541 18.8868 7.34215C18.6799 7.18889 18.4302 7.10422 18.1728 7.10001L13.1728 6.91112C13.1482 6.90943 13.1246 6.90066 13.1049 6.88587C13.0852 6.87109 13.0702 6.85092 13.0617 6.82779L11.3339 2.16113C11.2471 1.9237 11.0894 1.71869 10.8822 1.57384C10.675 1.429 10.4284 1.35132 10.1756 1.35132C9.92277 1.35132 9.67608 1.429 9.46889 1.57384C9.26171 1.71869 9.10404 1.9237 9.01723 2.16113L7.29501 6.84446C7.28649 6.86758 7.27148 6.88775 7.25176 6.90254C7.23205 6.91733 7.20848 6.9261 7.1839 6.92779L2.1839 7.11668C1.92645 7.12089 1.67678 7.20555 1.46989 7.35882C1.263 7.51208 1.10926 7.72625 1.03023 7.9713C0.951207 8.21635 0.950852 8.47998 1.02922 8.72524C1.10759 8.9705 1.26075 9.18508 1.46723 9.3389L5.38945 12.4222C5.40908 12.4377 5.42375 12.4585 5.43165 12.4822C5.43955 12.5059 5.44033 12.5314 5.4339 12.5556L4.0839 17.3389C4.01394 17.5825 4.02072 17.8417 4.10331 18.0813C4.1859 18.3209 4.34029 18.5292 4.54548 18.6779C4.75067 18.8267 4.9967 18.9086 5.25009 18.9125C5.50349 18.9165 5.75195 18.8423 5.96167 18.7L10.1061 15.9222C10.1265 15.9081 10.1508 15.9006 10.1756 15.9006C10.2004 15.9006 10.2246 15.9081 10.245 15.9222L14.3895 18.7C14.5963 18.8471 14.8439 18.9262 15.0978 18.9262C15.3517 18.9262 15.5992 18.8471 15.8061 18.7C16.0114 18.5527 16.1659 18.3454 16.2485 18.1066C16.3311 17.8678 16.3376 17.6093 16.2672 17.3667L14.9061 12.5667C14.8989 12.5426 14.8993 12.5168 14.9073 12.493C14.9152 12.4691 14.9303 12.4483 14.9506 12.4333L18.8895 9.32224Z"
                    fill="#514A7E"
                  />
                </svg>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="23"
                  height="23"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <path
                    d="M18.8895 9.32224C19.0959 9.16842 19.2491 8.95383 19.3275 8.70858C19.4058 8.46332 19.4055 8.19968 19.3264 7.95463C19.2474 7.70958 19.0937 7.49541 18.8868 7.34215C18.6799 7.18889 18.4302 7.10422 18.1728 7.10001L13.1728 6.91112C13.1482 6.90943 13.1246 6.90066 13.1049 6.88587C13.0852 6.87109 13.0702 6.85092 13.0617 6.82779L11.3339 2.16113C11.2471 1.9237 11.0894 1.71869 10.8822 1.57384C10.675 1.429 10.4284 1.35132 10.1756 1.35132C9.92277 1.35132 9.67608 1.429 9.46889 1.57384C9.26171 1.71869 9.10404 1.9237 9.01723 2.16113L7.29501 6.84446C7.28649 6.86758 7.27148 6.88775 7.25176 6.90254C7.23205 6.91733 7.20848 6.9261 7.1839 6.92779L2.1839 7.11668C1.92645 7.12089 1.67678 7.20555 1.46989 7.35882C1.263 7.51208 1.10926 7.72625 1.03023 7.9713C0.951207 8.21635 0.950852 8.47998 1.02922 8.72524C1.10759 8.9705 1.26075 9.18508 1.46723 9.3389L5.38945 12.4222C5.40908 12.4377 5.42375 12.4585 5.43165 12.4822C5.43955 12.5059 5.44033 12.5314 5.4339 12.5556L4.0839 17.3389C4.01394 17.5825 4.02072 17.8417 4.10331 18.0813C4.1859 18.3209 4.34029 18.5292 4.54548 18.6779C4.75067 18.8267 4.9967 18.9086 5.25009 18.9125C5.50349 18.9165 5.75195 18.8423 5.96167 18.7L10.1061 15.9222C10.1265 15.9081 10.1508 15.9006 10.1756 15.9006C10.2004 15.9006 10.2246 15.9081 10.245 15.9222L14.3895 18.7C14.5963 18.8471 14.8439 18.9262 15.0978 18.9262C15.3517 18.9262 15.5992 18.8471 15.8061 18.7C16.0114 18.5527 16.1659 18.3454 16.2485 18.1066C16.3311 17.8678 16.3376 17.6093 16.2672 17.3667L14.9061 12.5667C14.8989 12.5426 14.8993 12.5168 14.9073 12.493C14.9152 12.4691 14.9303 12.4483 14.9506 12.4333L18.8895 9.32224Z"
                    fill="#514A7E"
                  />
                </svg>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="23"
                  height="23"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <path
                    d="M18.8895 9.32224C19.0959 9.16842 19.2491 8.95383 19.3275 8.70858C19.4058 8.46332 19.4055 8.19968 19.3264 7.95463C19.2474 7.70958 19.0937 7.49541 18.8868 7.34215C18.6799 7.18889 18.4302 7.10422 18.1728 7.10001L13.1728 6.91112C13.1482 6.90943 13.1246 6.90066 13.1049 6.88587C13.0852 6.87109 13.0702 6.85092 13.0617 6.82779L11.3339 2.16113C11.2471 1.9237 11.0894 1.71869 10.8822 1.57384C10.675 1.429 10.4284 1.35132 10.1756 1.35132C9.92277 1.35132 9.67608 1.429 9.46889 1.57384C9.26171 1.71869 9.10404 1.9237 9.01723 2.16113L7.29501 6.84446C7.28649 6.86758 7.27148 6.88775 7.25176 6.90254C7.23205 6.91733 7.20848 6.9261 7.1839 6.92779L2.1839 7.11668C1.92645 7.12089 1.67678 7.20555 1.46989 7.35882C1.263 7.51208 1.10926 7.72625 1.03023 7.9713C0.951207 8.21635 0.950852 8.47998 1.02922 8.72524C1.10759 8.9705 1.26075 9.18508 1.46723 9.3389L5.38945 12.4222C5.40908 12.4377 5.42375 12.4585 5.43165 12.4822C5.43955 12.5059 5.44033 12.5314 5.4339 12.5556L4.0839 17.3389C4.01394 17.5825 4.02072 17.8417 4.10331 18.0813C4.1859 18.3209 4.34029 18.5292 4.54548 18.6779C4.75067 18.8267 4.9967 18.9086 5.25009 18.9125C5.50349 18.9165 5.75195 18.8423 5.96167 18.7L10.1061 15.9222C10.1265 15.9081 10.1508 15.9006 10.1756 15.9006C10.2004 15.9006 10.2246 15.9081 10.245 15.9222L14.3895 18.7C14.5963 18.8471 14.8439 18.9262 15.0978 18.9262C15.3517 18.9262 15.5992 18.8471 15.8061 18.7C16.0114 18.5527 16.1659 18.3454 16.2485 18.1066C16.3311 17.8678 16.3376 17.6093 16.2672 17.3667L14.9061 12.5667C14.8989 12.5426 14.8993 12.5168 14.9073 12.493C14.9152 12.4691 14.9303 12.4483 14.9506 12.4333L18.8895 9.32224Z"
                    fill="#514A7E"
                  />
                </svg>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="23"
                  height="23"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <path
                    d="M18.8895 9.32224C19.0959 9.16842 19.2491 8.95383 19.3275 8.70858C19.4058 8.46332 19.4055 8.19968 19.3264 7.95463C19.2474 7.70958 19.0937 7.49541 18.8868 7.34215C18.6799 7.18889 18.4302 7.10422 18.1728 7.10001L13.1728 6.91112C13.1482 6.90943 13.1246 6.90066 13.1049 6.88587C13.0852 6.87109 13.0702 6.85092 13.0617 6.82779L11.3339 2.16113C11.2471 1.9237 11.0894 1.71869 10.8822 1.57384C10.675 1.429 10.4284 1.35132 10.1756 1.35132C9.92277 1.35132 9.67608 1.429 9.46889 1.57384C9.26171 1.71869 9.10404 1.9237 9.01723 2.16113L7.29501 6.84446C7.28649 6.86758 7.27148 6.88775 7.25176 6.90254C7.23205 6.91733 7.20848 6.9261 7.1839 6.92779L2.1839 7.11668C1.92645 7.12089 1.67678 7.20555 1.46989 7.35882C1.263 7.51208 1.10926 7.72625 1.03023 7.9713C0.951207 8.21635 0.950852 8.47998 1.02922 8.72524C1.10759 8.9705 1.26075 9.18508 1.46723 9.3389L5.38945 12.4222C5.40908 12.4377 5.42375 12.4585 5.43165 12.4822C5.43955 12.5059 5.44033 12.5314 5.4339 12.5556L4.0839 17.3389C4.01394 17.5825 4.02072 17.8417 4.10331 18.0813C4.1859 18.3209 4.34029 18.5292 4.54548 18.6779C4.75067 18.8267 4.9967 18.9086 5.25009 18.9125C5.50349 18.9165 5.75195 18.8423 5.96167 18.7L10.1061 15.9222C10.1265 15.9081 10.1508 15.9006 10.1756 15.9006C10.2004 15.9006 10.2246 15.9081 10.245 15.9222L14.3895 18.7C14.5963 18.8471 14.8439 18.9262 15.0978 18.9262C15.3517 18.9262 15.5992 18.8471 15.8061 18.7C16.0114 18.5527 16.1659 18.3454 16.2485 18.1066C16.3311 17.8678 16.3376 17.6093 16.2672 17.3667L14.9061 12.5667C14.8989 12.5426 14.8993 12.5168 14.9073 12.493C14.9152 12.4691 14.9303 12.4483 14.9506 12.4333L18.8895 9.32224Z"
                    fill="#514A7E"
                  />
                </svg>
              </div>
              <div className="feedback-box">
                <p className="see-feedback">Смотреть все отзывы
                <div className="line-feed"></div></p>
                <p className="add-feedback">Добавить отзыв</p>
              </div>
              <div className="description-box">
                <p className="description">Описание</p>
                <p className="desc">{product.description}</p>
              </div>
            </div>
          </div></div>
        </div>
      ) : (
        <div>loading</div>
      )}
    </>
  );
};
